# ─────────────────────────────────────────────────────────────────────
# VPS WireGuard Config — /etc/wireguard/wg0.conf (on Oracle VPS)
#
# HOW TO USE:
#   1. Run scripts/setup-wg.sh on the LAPTOP first.
#      It generates a filled-in version at /tmp/vps_wg0.conf with your laptop's public key.
#   2. Copy that file to the VPS: scp /tmp/vps_wg0.conf ubuntu@<VPS_IP>:/tmp/
#   3. On VPS: fill in PrivateKey + replace VPS_IFACE, then:
#      sudo cp /tmp/vps_wg0.conf /etc/wireguard/wg0.conf
#      sudo chmod 600 /etc/wireguard/wg0.conf
#      sudo systemctl enable --now wg-quick@wg0
#
# FIND YOUR VPS INTERFACE NAME: run 'ip link show' on VPS
#   Oracle Cloud typically uses: ens3
#   Others may use: eth0, enp0s3, ens160
# ─────────────────────────────────────────────────────────────────────

[Interface]
Address = 10.0.0.1/24
ListenPort = 51820
PrivateKey = PASTE_VPS_PRIVATE_KEY_HERE

# Replace VPS_IFACE with result of: ip route | grep default | awk '{print $5}'
PostUp   = sysctl -w net.ipv4.ip_forward=1
PostUp   = iptables -A FORWARD -i wg0 -j ACCEPT
PostUp   = iptables -A FORWARD -o wg0 -j ACCEPT
PostUp   = iptables -t nat -A POSTROUTING -o VPS_IFACE -j MASQUERADE
PostDown = iptables -D FORWARD -i wg0 -j ACCEPT
PostDown = iptables -D FORWARD -o wg0 -j ACCEPT
PostDown = iptables -t nat -D POSTROUTING -o VPS_IFACE -j MASQUERADE

[Peer]
# Laptop (Caktus Server)
PublicKey = PASTE_LAPTOP_PUBLIC_KEY_HERE
AllowedIPs = 10.0.0.2/32
